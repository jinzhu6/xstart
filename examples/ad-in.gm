global AD_CHANNEL = 3;

// get digital bits in sequence
global UpdateAD = function(ad) {
	local bits = 0;
	for(i=0; i<32; i+=1) {
		bits = ad.getDigitalBits(AD_CHANNEL);
		log(""+bits);
		sleep(0.2);
	}
};

// create AD device
ad = ADDevice("usb-ad");
if(!ad.connect()) { exit(); }
ad.setDigitalBits(AD_CHANNEL, 0);

// update device in thread
thread(UpdateAD, ad);
