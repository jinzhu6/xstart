global AD_CHANNEL = 2;

// set digital bits in sequence
global UpdateAD = function(ad) {
	bits = 1;
	for(i=0; i<32; i+=1) {
		ad.setDigitalBits(AD_CHANNEL, bits);
		if(bits == 8) { bits = 1; }
		else { bits = bits << 1; }
		sleep(0.2);
	}
	ad.setDigitalBits(AD_CHANNEL, 0);
};

// create AD device
ad = ADDevice("usb-ad");
if(!ad.connect()) { exit(); }

// update device in thread
thread(UpdateAD, ad);
